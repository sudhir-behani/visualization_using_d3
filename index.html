<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>IPL Tournament</title>
	<meta name="description" content="An IPL Tournament visualization">
	<meta name="author" content="Sudhir Behani">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<meta charset="utf-8">
<style>
body {
  font: 10px sans-serif;
}
.y.axisRight text {
    fill: orange;
}
.y.axisLeft text {
    fill: steelblue;
}
.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}
.x.axis path {
  display: none;

}
.title {
  font: 30 30px Helvetica Neue;
  fill: #666;
}
.category-name {
	font-size: 20px;
}

#tooltip {
    opacity: 0;
    position: absolute;
    text-align: center;
    width: 100px; 
	height: 30px;
	padding: 4px;
    background: white;
	border-radius: 8px;
    border: 0px;
}

#tooltip1 {
    opacity: 0;
    position: absolute;
    text-align: left;
    width: 100px; 
	height: 50px;
	padding: 4px;
    background: white;
	border-radius: 8px;
    border: 0px;
}


.button {
    display: inline-block;
    text-decoration: none;
    color: #fff;
    font-weight: bold;
    background-color: #538fbe;
    padding: 20px 70px;
    font-size: 24px;
    border: 1px solid #2d6898;
    background-image: linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
    background-image: -o-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
    background-image: -moz-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
    background-image: -webkit-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
    background-image: -ms-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
 
    background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0, rgb(73,132,180)),
        color-stop(1, rgb(97,155,203))
    );
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    text-shadow: 0px -1px 0px rgba(0,0,0,.5);
    -webkit-box-shadow: 0px 6px 0px #2b638f, 0px 3px 15px rgba(0,0,0,.4), inset 0px 1px 0px rgba(255,255,255,.3), inset 0px 0px 3px rgba(255,255,255,.5);
    -moz-box-shadow: 0px 6px 0px #2b638f, 0px 3px 15px rgba(0,0,0,.4), inset 0px 1px 0px rgba(255,255,255,.3), inset 0px 0px 3px rgba(255,255,255,.5);
    box-shadow: 0px 6px 0px #2b638f, 0px 3px 15px rgba(0,0,0,.4), inset 0px 1px 0px rgba(255,255,255,.3), inset 0px 0px 3px rgba(255,255,255,.5);
}
</style>
<body>
	<div class="slides" id="first_slide" style="background-color:lightblue">
		<section>
			<center>
				<h1>
					Cricket IPL (Indian Premier League) Tournament:
				</h1>
				<h3>
					A professional Twenty20 cricket league in India. Twenty20 match format is a form of limited overs cricket in that it involves two teams.  
				</h3>
				<h3>
					There have been ten seasons of the IPL tournament starting from 2007 to 2017. A toss decides whether a team will bat or bowl first. 
				</h3>
				<h3>
					Team batting first wins then its win by runs and on the other hand team batting second wins then its considered as win by wickets. 
					There are in total 20 overs and each over bowled has six deliveries. 			
				</h3>
				<div class="fragment" data-fragment-index="0" class="navigate-down" style="cursor: pointer;">
					<img src="images/arrow-down.png" style="border: none; background:none; box-shadow:none;" alt="Arrow Down">
				</div>
			</center>
		</section>
	</div>
	
	<div class="slides" id="second_slide" style="background-color:lightblue">	
		<section>
			<h1>
				Data Visualization
			</h1>
			<small>
				<ol>
					<li class="fragment" data-fragment-index="1"><strong>Scenes</strong></li>
					<p class="fragment" data-fragment-index="2">The slides that make up the presentation.
						These slides can be navigated through guding arrows in the
					<li class="fragment" data-fragment-index="3"><strong>Annotations</strong></li>
					<p class="fragment" data-fragment-index="4">Various <strong>tooltips</strong>, <strong>labels</strong> & <strong>legends</strong>; that display dish names and counts.</p>
					<li class="fragment" data-fragment-index="5"><strong>Parameters</strong></li>
					<p class="fragment" data-fragment-index="6">The main parameters of this story are dish <strong>names</strong>, their <strong>counts</strong> and appearance <strong>years</strong>.</p>
					<li class="fragment" data-fragment-index="7"><strong>Triggers</strong></li>
					<p class="fragment" data-fragment-index="8"><strong>Zoom and Brush</strong> filter, <strong>buttons</strong> with affordances are used to trigger updates in visuals based on new parameters.</p>
				</ol>
				<div class="fragment" data-fragment-index="9" style="cursor: pointer;">
					<img src="images/arrow-down.png" style="border: none; background:none; box-shadow:none;" height="60" width="60">
				</div>
			</small>							
		</section>
	</div>
	<div class="slides" id="last_slide" style="background-color:lightblue">	
		<center>
			<h1>
				Thank You!!
			</h1>	
		</center>
	</div>	
	
	
	<footer>
      <small>Copyright © <time datetime="2018">2018</time> by Sudhir Behani</small>
    </footer>
	
	<div id="tooltip"></div>
	<div id="viz_button" style="display:none;"\>
		<button class="button" onclick="about_vis()">Data Visualization</button>
	</div>
	<div id="all_buttons" style="display:none;"\>
		<button class="button" onclick="matches_played_won()" >Matches Played Won</button>
		<button class="button" onclick="win_by()" >WinBy_Wickets_Runs </button>
		<button class="button" onclick="runs_per_over()" >RunsPerOver</button>
	</div>
	<script src="https://d3js.org/d3.v3.min.js"></script>
	<script src="keypress.js"></script>
<script>
	var data_matches = 0;
	var data_win_by = 0;
	var data_runs_per_over = 0;

	<!--Colors -->
	//macthes_played_won
	var color_mp = "steelblue";
	var color_mw = "orange";

	// win_by
	var color_wbr = "#69c242";
	var color_wbw = "#dd4477";
	
	// runs per over
	var color_rps = "#994499";				
	var color_rpn = "#ffcc00";

	// clear the screen
	function clear_screen() {
	
		// remove any svg element
		d3.select("svg").remove();
		// remove any div elemnts
		var div_elems = document.getElementsByClassName("slides");
		var i;
		for (i = 0; i < div_elems.length; i++) {
			div_elems[i].style.display = "none";
		}
	}

    <!--Function to Load the data -->
	function load_data() {
		<!--Data Matches -->
		console.log('Loading matches data..')
		d3.tsv("src/matche_play_won.tsv", type_matches, function(error, data) {
			data_matches = data;
			console.log(data_matches);
		});
		function type_matches(d) {
		  d.played = +d.played;
		  return d;
		}
		
		<!--Data Win By -->
		console.log('Loading wins_by data..')		
		d3.tsv("src/win_by.tsv", type_winby, function(error, data) {
			data_win_by = data;
			console.log(data_win_by);
		});
		function type_winby(d) {
		  d.win_by_runs = +d.win_by_runs;
		  return d;
		}
		<!--Data Runs Per Over -->
		console.log('Loading run per over data..')		 	
		d3.tsv("src/runs_per_over.tsv", type_runs, function(error, data) {
			data_runs_per_over = data;
			console.log(data_runs_per_over);
		});
		function type_runs(d) {
		  d.runs_super_over = +d.runs_super_over;
		  return d;
		}		  		
	}

	// init first slides	
	function init() {
		
		// clear complete screen
		clear_screen();
		// load data from file
		load_data();
		// initialize the first slide
		var div_elem = document.getElementById("first_slide");
		div_elem.style.display = "block";
	}
	init();
	
	// switch to page
	function switch_page(page) {
		switch(page) {
			case 1:
				clear_screen();
				d3.select("svg").remove();
				var div_elem = document.getElementById("first_slide");
				div_elem.style.display = "block";
				break;
			case 2:
				clear_screen();
				var div_elem = document.getElementById("second_slide");
				div_elem.style.display = "block";				
				break;
			case 3:
				break;				
			case 4:
				clear_screen();
				matches_played_won();
				break;
			case 5:
				clear_screen();
				win_by();
				break;
			case 6:
				clear_screen();
				runs_per_over();
				break;
			case 7:
				clear_screen();
				var div_elem = document.getElementById("last_slide");
				div_elem.style.display = "block";
				break;				
			default:
				clear_screen();
		}				
	}
	
	// controls the pagination 	
	var page=1;	
	function pageup() {
		return function(event) {
			event.preventDefault();
			if (page > 1 ) {
				page = page - 1;
			}
			switch_page(page);
			console.log("Arrow key pressed - pageup."+page);
		};
	}	

	function pagedown() {
	
		return function(event) {
			event.preventDefault();
			page = page + 1;
			if (page == 8 ) {
				page = 1;
			}			
			switch_page(page);
			console.log("Arrow key pressed - pagedown."+page);
		};
	}
	
	function controls() {

	d3.select('body').call(d3.keybinding()
		.on('←', pageup())
		.on('↑', pageup())
		.on('→', pagedown())
		.on('↓', pagedown())
		.on('pgup', pageup())
		.on('pgdown', pagedown())
		);	
	}
	controls();
			
    <!--Load the data -->	
	//load_data();

	<!--About Button -->	
	function about_vis(){
		console.log("Pressed the button about_viz");
		d3.select("svg").remove();		
		var elem = document.getElementById("all_buttons");
		console.log(elem)
		if (elem.style.display === "none") {
			elem.style.display = "block";
		} else {
			elem.style.display = "none";
		}
	}
	
	<!--Visualization Description -->	
	
	<!--Scene1 -->
	function matches_played_won(){	
		d3.select("svg").remove();
				
		var margin = {top: 80, right: 80, bottom: 80, left: 80},
			width = 960 - margin.left - margin.right,
			height = 500 - margin.top - margin.bottom;
		var x = d3.scale.ordinal()
			.rangeRoundBands([0, width], .1);
		var y0 = d3.scale.linear().domain([300, 1100]).range([height, 0]);
		
		var xAxis = d3.svg.axis()
			.scale(x)
			.orient("bottom");
			
		// create left yAxis
		var yAxisLeft = d3.svg.axis().scale(y0).ticks(4).orient("left");

		var tooltip = d3.select("#tooltip");

		var svg = d3.select("body").append("svg")
			.attr("width", width + margin.left + margin.right)
			.attr("height", height + margin.top + margin.bottom)
		  .append("g")
			.attr("class", "graph")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")")
		
			x.domain(data_matches.map(function(d) { return d.team; }));
			y0.domain([0, d3.max(data_matches, function(d) { return d.played; })]);
			
			svg.append("g")
			  .attr("class", "x axis")
			  .attr("transform", "translate(0," + height + ")")
			  .call(xAxis);
			  
			svg.append("g")
			  .attr("class", "y axis axisLeft")
			  .attr("transform", "translate(0,0)")
			  .call(yAxisLeft)
			  .append("text")
				.attr("y", 6)
				.attr("dy", "-2em")
				.style("text-anchor", "end")
				.style("text-anchor", "end")
				.text("Matches");
		
			bars = svg.selectAll(".bar").data(data_matches).enter();	
			bars.append("rect")
			  .attr("class", "bar1")
			  .attr("x", function(d) { return x(d.team); })
			  .attr("width", x.rangeBand()/2)
			  .attr("y", function(d) { return y0(d.played); })
			  .attr("height", function(d,i,j) { return height - y0(d.played); })
			  .attr("fill", color_mp)			  
			  .on("mouseover", function(d,i) {
					tooltip.style("opacity", 1)
						   .style("left",(d3.event.pageX)+"px")
						   .style("top",(d3.event.pageY)+"px")
						   .html("Team Name:" + d.team + "\n" +"Matches Played:"+d.played);
				})
			   .on("mouseout", function() { tooltip.style("opacity", 0) });

			bars.append("rect")
			  .attr("class", "bar2")
			  .attr("x", function(d) { return x(d.team); })
			  .attr("width", x.rangeBand() / 2)
			  .attr("y", function(d) { return y0(d.won); })
			  .attr("height", function(d,i,j) { return height - y0(d.won); })			  
			  .attr("fill", color_mw)			  			  
			  .on("mouseover", function(d,i) {
					tooltip.style("opacity", 1)
						   .style("left",(d3.event.pageX)+"px")
						   .style("top",(d3.event.pageY)+"px")
						   .html("Team Name:" + d.team + "\n" +"Matches Won:"+d.won);
				})
				.on("mouseout", function() { tooltip.style("opacity", 0) });
				
		console.log(bars);		
						
		<!--Create the legend -->
		var colors = d3.scale.ordinal()
			.range([color_mp, color_mw]);		
		//var colors = d3.range([color_mp, color_mw]);		
		
		var legend = svg.selectAll(".legend")
		.data(["Matches Played", "Matches Won"])
		.enter().append("g")
		.attr("class", "legend")
		.attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });		
		
		legend.append("rect")
		.attr("x", width - 5)
		.attr("width", 18)
		.attr("height", 18)
		.style("fill", colors);
		
		console.log(legend);
		
		legend.append("text")
		.attr("x", width - 10)
		.attr("y", 9)
		.attr("dy", ".35em")
		.style("text-anchor", "end")
		.text(function(d) { return d; });		
	}

	<!--Scene2 -->
	function win_by() {
		console.log("Pressed the button win_by");	
		d3.select("svg").remove();
		var margin = {top: 80, right: 80, bottom: 80, left: 80},
			width = 960 - margin.left - margin.right,
			height = 500 - margin.top - margin.bottom;
		var x = d3.scale.ordinal()
			.rangeRoundBands([0, width], .1);
		var y0 = d3.scale.linear().domain([300, 1100]).range([height, 0]);
		
		var xAxis = d3.svg.axis()
			.scale(x)
			.orient("bottom");
			
		// create left yAxis
		var yAxisLeft = d3.svg.axis().scale(y0).ticks(4).orient("left");

		var tooltip = d3.select("#tooltip");

		var svg = d3.select("body").append("svg")
			.attr("width", width + margin.left + margin.right)
			.attr("height", height + margin.top + margin.bottom)
		  .append("g")
			.attr("class", "graph")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
		
		x.domain(data_win_by.map(function(d) { return d.team; }));
		y0.domain([0, d3.max(data_win_by, function(d) { return d.win_by_runs; })]);
 
		svg.append("g")
		  .attr("class", "x axis")
		  .attr("transform", "translate(0," + height + ")")
		  .call(xAxis);
		  
		svg.append("g")
		  .attr("class", "y axis axisLeft")
		  .attr("transform", "translate(0,0)")
		  .call(yAxisLeft)
		  .append("text")
			.attr("y", 6)
			.attr("dy", "-2em")
			.style("text-anchor", "end")
			.style("text-anchor", "end")
			.text("Win By");
					
		bars = svg.selectAll(".bar").data(data_win_by).enter();	
		bars.append("rect")
		  .attr("class", "bar1")
		  .attr("x", function(d) { return x(d.team); })
		  .attr("width", x.rangeBand()/2)
		  .attr("y", function(d) { return y0(d.win_by_runs); })
		  .attr("height", function(d,i,j) { return height - y0(d.win_by_runs); })
		  .attr("fill", color_wbr)		
		  .on("mouseover", function(d,i) {
				tooltip.style("opacity", 1)
					   .style("left",(d3.event.pageX)+"px")
					   .style("top",(d3.event.pageY)+"px")
					   .html("Team Name:" + d.team + "\n" +"Win by runs:"+d.win_by_runs);
			})
		   .on("mouseout", function() { tooltip.style("opacity", 0) });

		bars.append("rect")
		  .attr("class", "bar2")
		  .attr("x", function(d) { return x(d.team) + x.rangeBand()/2; })
		  .attr("width", x.rangeBand() / 2)
		  .attr("y", function(d) { return y0(d.win_by_wickets); })
		  .attr("height", function(d,i,j) { return height - y0(d.win_by_wickets); })
		  .attr("fill", color_wbw)
		  .on("mouseover", function(d,i) {
				tooltip.style("opacity", 1)
					   .style("left",(d3.event.pageX)+"px")
					   .style("top",(d3.event.pageY)+"px")
					   .html("Team Name:" + d.team + "\n" +"Win by wickets:"+d.win_by_wickets);
			})
			.on("mouseout", function() { tooltip.style("opacity", 0) });
				
		function type(d) {
		  d.win_by_runs = +d.win_by_runs;
		  return d;
		}

		<!--Create the legend -->
		var colors = d3.scale.ordinal()
			.range([color_wbr, color_wbw]);		
		
		var legend = svg.selectAll(".legend")
		.data(["Win By Runs", "Win By Wickets"])
		.enter().append("g")
		.attr("class", "legend")
		.attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });		
		
		legend.append("rect")
		.attr("x", width - 5)
		.attr("width", 18)
		.attr("height", 18)
		.style("fill", colors);
		
		console.log(legend);
		
		legend.append("text")
		.attr("x", width - 10)
		.attr("y", 9)
		.attr("dy", ".35em")
		.style("text-anchor", "end")
		.text(function(d) { return d; });		
	}
	
	<!--Scene3 -->
	function runs_per_over() {
		console.log("Pressed the button runs_per_over");	
		d3.select("svg").remove();
		var margin = {top: 80, right: 80, bottom: 80, left: 80},
			width = 960 - margin.left - margin.right,
			height = 500 - margin.top - margin.bottom;
		var x = d3.scale.ordinal()
			.rangeRoundBands([0, width], .1);
		var y0 = d3.scale.linear().domain([300, 1100]).range([height, 0]);
		
		var xAxis = d3.svg.axis()
			.scale(x)
			.orient("bottom");
			
		// create left yAxis
		var yAxisLeft = d3.svg.axis().scale(y0).ticks(4).orient("left");

		var tooltip_r = d3.select("#tooltip");

		var svg = d3.select("body").append("svg")
			.attr("width", width + margin.left + margin.right)
			.attr("height", height + margin.top + margin.bottom)
		  .append("g")
			.attr("class", "graph")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
		
		x.domain(data_runs_per_over.map(function(d) { return d.team; }));
		y0.domain([0, d3.max(data_runs_per_over, function(d) { return d.runs_super_over; })]);
 
		svg.append("g")
		  .attr("class", "x axis")
		  .attr("transform", "translate(0," + height + ")")
		  .call(xAxis);
		  
		svg.append("g")
		  .attr("class", "y axis axisLeft")
		  .attr("transform", "translate(0,0)")
		  .call(yAxisLeft)
		  .append("text")
			.attr("y", 6)
			.attr("dy", "-2em")
			.style("text-anchor", "end")
			.style("text-anchor", "end")
			.text("Runs Per Over");
			
		bars = svg.selectAll(".bar").data(data_runs_per_over).enter();	
		bars.append("rect")
		  .attr("class", "bar1")
		  .attr("x", function(d) { return x(d.team); })
		  .attr("width", x.rangeBand()/2)
		  .attr("y", function(d) { return y0(d.runs_super_over); })
		  .attr("height", function(d,i,j) { return height - y0(d.runs_super_over); }) 
		  .attr("fill", "#994499")				  
		  .on("mouseover", function(d,i) {
				tooltip_r.style("opacity", 1)
					   .style("left",(d3.event.pageX)+"px")
					   .style("top",(d3.event.pageY)+"px")
					   .html("Team Name:" + d.team + "\n" + "Runs Per Super Over:"+d.runs_super_over);
			})
		   .on("mouseout", function() { tooltip_r.style("opacity", 0) });

		bars.append("rect")
		  .attr("class", "bar2")
		  .attr("x", function(d) { return x(d.team); })
		  .attr("width", x.rangeBand() / 2)
		  .attr("y", function(d) { return y0(d.runs_normal_over); })
		  .attr("height", function(d,i,j) { return height - y0(d.runs_normal_over); })
		  .attr("fill", color_rpn)				  
		  .on("mouseover", function(d,i) {
				tooltip_r.style("opacity", 1)
					   .style("left",(d3.event.pageX)+"px")
					   .style("top",(d3.event.pageY)+"px")
					   .html("Team Name:" + d.team + "\n" + "Runs Per Normal Over:"+d.runs_normal_over);
			})
			.on("mouseout", function() { tooltip_r.style("opacity", 0) });
				
		function type(d) {
		  d.runs_super_over = +d.runs_super_over;
		  return d;
		}		

		<!--Create the legend -->
		var colors = d3.scale.ordinal()
			.range([color_rps, color_rpn]);		
		
		var legend = svg.selectAll(".legend")
		.data(["Runs Per Normal Over", "Runs Per Super Over"])
		.enter().append("g")
		.attr("class", "legend")
		.attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });		
		
		legend.append("rect")
		.attr("x", width - 5)
		.attr("width", 18)
		.attr("height", 18)
		.style("fill", colors);
		
		legend.append("text")
		.attr("x", width - 10)
		.attr("y", 9)
		.attr("dy", ".35em")
		.style("text-anchor", "end")
		.text(function(d) { return d; });				
	} 

</script>
<div id="matches" style="display:none;">
	<script>
		var match = document.getElementById("matches");
		if (match.style.display === "none") {
			;
		} else {
			matches_played_won();
		}
	</script>
</div>
</html>
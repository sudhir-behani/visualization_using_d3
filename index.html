<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>IPL Tournament</title>
	<meta name="description" content="An IPL Tournament Visualization">
	<meta name="author" content="Sudhir Behani">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<meta charset="utf-8">
<style>
body {
  font: 10px sans-serif;
}
.loading {
	background: url('images/ico_loading.gif') no-repeat center center;
}
.y.axisRight text {
    fill: orange;
}
.y.axisLeft text {
    fill: black;
}
.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}
.x.axis path {
  display: none;

}
.title {
  font: 30 30px Helvetica Neue;
  fill: #666;
}
.category-name {
	font-size: 20px;
}

#tooltip {
    opacity: 0;
    position: absolute;
    text-align: left;
    width: 110px; 
	height: 30px;
	padding: 4px;
    background: white;
	border-radius: 8px;
    border: 0px;
}

#tooltipWinBy {
    opacity: 0;
    position: absolute;
    text-align: left;
    width: 100px; 
	height: 50px;
	padding: 4px;
    background: white;
	border-radius: 8px;
    border: 0px;
}

p.date {
    text-align: right;
}

p.main {
    text-align: justify;
}

form {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  position: absolute;
  left: 300px;
  top: 220px;
}

.button {
    display: inline-block;
    text-decoration: none;
    color: #fff;
    font-weight: bold;
    background-color: #538fbe;
    padding: 20px 70px;
    font-size: 24px;
    border: 1px solid #2d6898;
    background-image: linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
    background-image: -o-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
    background-image: -moz-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
    background-image: -webkit-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
    background-image: -ms-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
 
    background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0, rgb(73,132,180)),
        color-stop(1, rgb(97,155,203))
    );
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    text-shadow: 0px -1px 0px rgba(0,0,0,.5);
    -webkit-box-shadow: 0px 6px 0px #2b638f, 0px 3px 15px rgba(0,0,0,.4), inset 0px 1px 0px rgba(255,255,255,.3), inset 0px 0px 3px rgba(255,255,255,.5);
    -moz-box-shadow: 0px 6px 0px #2b638f, 0px 3px 15px rgba(0,0,0,.4), inset 0px 1px 0px rgba(255,255,255,.3), inset 0px 0px 3px rgba(255,255,255,.5);
    box-shadow: 0px 6px 0px #2b638f, 0px 3px 15px rgba(0,0,0,.4), inset 0px 1px 0px rgba(255,255,255,.3), inset 0px 0px 3px rgba(255,255,255,.5);
}
</style>
<body>
	<script>
	<!--Load All dataset -->
	</script>
	
	<div class="loading" id="init_slide" style="background-color:black">
		<img src="images/ico_loading.gif" style="border: none; box-shadow:none; position:absolute; top:300px; left:720px;">	
	</div>
	
	<div class="slides" id="first_slide" data-center="opacity: 1"  hidden>
		<div class="fragment" data-fragment-index="1">
			<img src="images/IPL_Logo.png" style="border: none; background:none; box-shadow:none; position:absolute; top:0px; left:0px; width=70% height=70%" >
		</div>					
		<section style="position: absolute; top: 140px; left: 150px;">
			<center>
				<h1>
					IPL TOURNAMENT
				</h1>
				<br>
					<p>
						A professional Twenty20 cricket league in India. Twenty20 match is a form of limited overs cricket and it involves two teams.  
					</p>
					<p>
						There have been ten seasons of the IPL tournament starting from 2007 to 2017. A toss decides whether a team will bat or bowl first. 
					</p>
					<p>
						There are in total 20 overs and each over bowled has six deliveries. 			
					</p>
					<br><br>
					<p>
					Created by Sudhir Behani
					</p>
				<br><br>
				<button class="button" onclick="about_vis()" style="cursor: pointer;"><strong>About the Visualization</strong></button>
				<div class="fragment" data-fragment-index="2">
					<img src="images/arrow-down.png" onclick="click_down_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:530px; left:1250px; width:80px;" height="60" width="60">
				</div>
			</center>
		</section>
	</div>
	
	<div class="slides" id="second_slide" hidden>
		<section>
			<h1>
				The Narative Visualization
			</h1>
			<p>
				This project focuses on hybrid struture visualization with interactive slideshows to narrate the story of IPL Tournament dataset.     
			</p>			
			<h1>
				Elements of Narrative Visuals 
			</h1>			
			<small>
				<ol>
					<li class="fragment" data-fragment-index="1"><strong>Scenes:</strong></li>
					<p class="fragment" data-fragment-index="2">The <strong>scenes</strong> comprises of each page that make up the presentation. These scenes contains textual and chart description about the visualization.
						They can be controlled using arrow keys or by clicking arrow image which enable users to move from scene to scene. Arrow image/s are clearly visible in each scene to guide user on which key to press.
						<br>
						<strong>Scene 1 :</strong> Includes an analysis between matches played and matches won
						<br>
                        <strong>Scene 2 :</strong> Includes comparision between matches played, win by wickets and win by runs.
						<br>
                        <strong>Scene 3 :</strong> Includes comparision between runs scored in super over vs runs scored in normal overs.   						
					</p>
					<li class="fragment" data-fragment-index="3"><strong>Annotations:</strong></li>
					<p class="fragment" data-fragment-index="4">The <strong>tooltip</strong> labels that appear when users hover over data points to provide more infromation about the bar. Tooltips are cleared each scene as next scene incldes different set of parameters.<strong> Annotation box</strong> that highlight important points in the charts. <strong>Legends</strong> describes the meaning of colors used in each charts.</p>
					<li class="fragment" data-fragment-index="5"><strong>Parameters:</strong></li>
					<p class="fragment" data-fragment-index="6">The parameters of this interective presentation are <strong>matches played and won, win by runs and wickets</strong> and <strong>avg runs per over in normal and super overs.</strong> Description about each paramaters are present under the dataset explanation page.</p>
					<li class="fragment" data-fragment-index="7"><strong>Triggers:</strong></li>
					<p class="fragment" data-fragment-index="8"><strong>Arrows</strong>, <strong>button</strong>, <strong>radio buttons</strong> and <strong>labels</strong> are used to trigger updates in this visulization. <strong>Arrows</strong> control allows user to move from one scene to another.<br><strong>Button</strong> in the first scene allows user to get details about the elements of the narrative visualization. <br><strong>Radio buttons</strong> in the scene zooms to provide deeper look into the the top teams.<br><strong>Label</strong> allows user to control display of annotations.</p>
				</ol>
			</small>							
			<center>
			<div class="fragment" data-fragment-index="9" >
				<img src="images/arrow-left.png" onclick="click_left_key()" style="cursor: pointer; border: none; background:none; box-shadow:none;" height="60" width="60">
			</div>			
			</center>			
		</section>
	</div>
		
	<div class="slides" id="third_slide" style="position: absolute; top: 100px; left: 100px;" hidden>
		<h1>
		THE DATASET
		</h1>
		<p>
		Dataset includes two csv files: matches and deliveries. There were 636 matches played including all the seasons.
		</p>
		<p>
		<strong>First</strong> file consists of match details for each season (season is represented as year of hosting). Mentioned details comprises of city where the match is played, 
		names of the participating teams - <strong>team1, team2,</strong> toss winning team, result of the match whether it is a tie/normal/no result 
		(no result can be a case when a match is abandoned due to weather conditions), <strong>winning team and losing team of the match.</strong> 
		<strong>Winning teams</strong> can win a match based on <strong>win by wickets and win by runs.</strong> 
		If team batting first wins the match they are said to be winning by runs else when team batting second wins they win by wickets.
		</p>
		
		<p>
		<strong>Second</strong> file consists of deliveries which contains detailed information about each match. Inning details for each match, team batting first has innings as 1 and other team batting second has innings as 2. 
		Batting team, bowling team names and this gets revered for innings 2, as team batting first will bowl and team bowling will be batting. So for each match there are 2 innings and each team will bat and bowl once. 
		As this is a twenty over game over column contains each over number and ball column contains information about each bowl per over. Information like batsman, non_striker (batsman) and bowler are also added. 
		For each match, there will be <strong>5 super overs</strong> where there are restrictions for placing a fielders inside the circle so that batsman get the liberty to hit long shots. 
		</p>
		
		<center>
		<a href="https://www.kaggle.com/manasgarg/ipl">Link to Dataset Source</a>
		</center>
		
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-up.png" onclick="click_up_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:530px; left:1300px; width:80px;" height="60" width="60">
		</div>					
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-down.png" onclick="click_down_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:580px; left:1300px; width:80px;" height="60" width="60">
		</div>		
	</div>
	
	<div class="slides" id="fourth_slide" hidden>
	<h1 style="font-size:25px">
	Matches Played vs Matches Won
	</h1>
	<h3 style="font-size:13px">
	This chart shows a comparison between total matches played and matches won by each team as a sude by side bar chart.
	Team name is nominal variable and plotted in X axis, Y axis is discrete value as total matches played and won for each team is discrete.
	A side by side bar chart was chosen as it’s a plot between nominal and discrete with different colors for total matches and matches won for effective comparison. 
	</h3>
	<h3 style="font-size:13px">
	In the data source matches.csv team1 and team2 names were shown separately to present the match between two teams. 
	Combining team1 and team2 contains all the team names for each match that allowed to calculate total matches played by each team.
	</h3>
	<h3 style="font-size:13px">
	Chart shows 3 category of teams based on number of matches played: 1) High Experience Teams  2) Mid Experience Teams  3) Low Experience Teams 
	</h3>		
	<h3 style="font-size:13px">
	Chart is sorted in descending order of matches won. This is to showcase that top winning teams have high experience.
	</h3>
	<p>
	Note: Exceptions are marked with red color annotations
	</p>	
	<br><br>
	<form>
	  <label><input type="radio" name="mode" id="radio_matches" value="matches_all" checked>All Teams</label>
	  <label><input type="radio" name="mode" id ="radio_matches_top" value="matches_top">Top 5 Teams</label>
	</form>
	<div style="position: absolute; top: 220px; left: 500px;">
	  <input type="checkbox" id="check_match_ano_all" value="match_check"/>
	  <label for="option position:"> <span></span>Show All Annotations</label>
	</div>		
	<br>
	<center>
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-up.png" onclick="click_up_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:630px; left:1400px; width:80px;" height="60" width="60">
		</div>						
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-down.png" onclick="click_down_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:680px; left:1400px; width:80px;" height="60" width="60">
		</div>	
	</center>	
	</div>
	
	<div class="slides" id="fifth_slide" hidden>
	<h1 style="font-size:25px">
	Matches Played vs WinByRuns vs WinByWickets
	</h1>
	<h3 style="font-size:13px">
	In this plot we compare all wining team's matches won, win by runs and win by wickets. Team name is a nominal variable as it contains names and plotted on X axis, 
	Y axis has the count of Matches Won, WinByRuns and WinByWickets. A side by side bar chart was chosen to clearly showcase the matches won, win by runs and win by wickets for each winning team. 
	</h3>
	<h3 style="font-size:13px">
	This plot shows that top teams having high experience are good in win by wickets and reasonable well in win by runs. In simple terms, this mean these that top teams can perform good while batting first or second.
	The mid experience teams are good in win by runs but getting better in win by wickets which seems to be good for team "SH". Low experience teams are relatively better in win by runs. 
	</h3>
	<h3 style="font-size:13px">
	</h3>
	<h3 style="font-size:13px">
	Even though plot is sorted in descending order of win by wickets it clearly separates high, mid, and low experience teams.
	</h3>	
	<h3 style="font-size:13px">
	CSK, KKR and MI are top winning teams. KXP has high experience and extremely good in win by runs but does not demostrate good win by wickets compared to other top teams. 
	KXP good in one format of the game which is batting first.
	</h3>
	<p>
	Note: 
	</p>
	<p>
	1. Exceptions are marked with red color annotation
	</p>
	<p>
	2. Unselect checkbox to hide annotations
	</p>
	<br><br>
	<form>
	  <label><input type="radio" name="mode" id="radio_winby" value="winby_all" checked hidden></label>
	</form>
	<div style="position: absolute; top: 255px; left: 300px;">
	  <input type="checkbox" id="check_win_ano_all" value="winby_check"/>
	  <label for="option position:"> <span></span>Show All Annotations</label>
	</div>	
	<br>	
	<center>
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-up.png" onclick="click_up_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:630px; left:1400px; width:80px;" height="60" width="60">
		</div>						
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-down.png" onclick="click_down_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:680px; left:1400px; width:80px;" height="60" width="60">
		</div>	
	</center>	
	</div>

	<div class="slides" id="sixth_slide" hidden>
		<div style="position: absolute; top: 220px; left: 500px;">
		  <input type="checkbox" id="check_runs_ano_all" value="runs_check" checked/>
		  <label for="option position:"> <span></span>Show All Annotations</label>
		</div>	
	<h1 style="font-size:25px">
	Runs scored in super over vs normal overs
	</h1>
	<h3 style="font-size:13px">
	This is a plot for winning teams with runs scored in each super over and each normal overs. 
	Winner is a nominal variable and avg runs scored in super overs and in normal overs are continuous variables.
	</h3>
	<h3 style="font-size:13px">
	As it’s a plot between nominal and continuous, and so a side by side bar chart was selected. This chart will help in comparing avg runs per over in super and normal overs.
	</h3>
	<h3 style="font-size:13px">
	High experience teams have better avg runs per over in normal overs than other teams. CSK is an exception amongst high experience teams with lower avg runs per over in super overs but high avg runs per over in normal over runs. SH is an exception in mid experience teams with low avg runs per over in normal overs but high runs in super overs.	 
	</h3>
	<h3 style="font-size:13px">
	Plot is sorted in descending order of avg runs scored in normal overs and it mostly seperates high, mid and low experience teams.
	</h3>
	<br><br> 
	<form>
	  <label><input type="radio" name="mode" id="radio_runs" value="runs_all" checked>All Teams</label>
	  <label><input type="radio" name="mode" id ="radio_runs_top" value="runs_top">Top 5 Teams</label>
	</form>
	<br>		
	<center>
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-up.png" onclick="click_up_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:630px; left:1400px; width:80px;" height="60" width="60">
		</div>						
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-down.png" onclick="click_down_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:680px; left:1400px; width:80px;" height="60" width="60">
		</div>	
	</center>	
	</div>
	
	<div class="slides" id="last_slide" hidden>
	<h1>
	Inference
	</h1>
	<p><b>
	Matches Played vs Matches Won
	</b></p>
	<small>
		<p>
		This plot displays the top teams with the max number of wins. It has categorised teams into high, medium and low risk teams based on number of matches played.
		As per the categorinsation, number of wins is correlated to the number of matches played i.e. experience of the team with more matches played.
		Top 5 teams teams are MI, CSK, KKR, RCB and, KXP respectively as per number of wins. CSK has least experience compared to other top 5 teams.	
		</p>
	</small>
	<p><b>
	WinByRuns vs WinByWickets
	</b></p>
	<small>
		<p>
		IPL tournament being only a 20 over match, team batting first have the advantage of playing without any mental difficulty pressure in comparison 
		to team batting second who have the runs to be scored. So win by wickets is more difficult. High experience teams have good win by wickets. Hence more experience give teams an ability to handle pressure situations well.		
		KXP is an exception even though has good experience and good win by wickets still has very low win by wickets. 
		</p>
		<p>
		Likewise, mid experience teams have good win by runs. Due to lack to experience they are good while batting first. Low experience teams have more win by runs than win by wickets.
		</p>
		<p>
		<strong>Top 4 winining teams</strong> CSK, KKR, MI and RCB has high win by wickets and also good win by runs. <strong>MI</strong> has both win by runs and wickets ver close which signifies they are good while batting first or second. 
		</p>
	</small>
	<p><b>
	Runs scored in super over vs normal overs
	</b></p>
	<small>
		<p>
		High experience teams score good avgerage runs in normal overs. Mid experience teams score moderate runs in normal overs with <strong>exception to team SH</strong>, 
		which has very high super of scoring rate but low in normal overs.
		</p>
		<p>
		CSK is an exception in high experience tems with less scoring rate in super overs but good in normal overs. 
		SH is a moderate experience team having high rate of scoring runs in super overs. This can be one reason for their wins while batting first i.e. win by runs. 
		<strong>Scoring rate in normal overs</strong> is an important factor for wining a match though other factors needs to be explored.	
		</p>
		<p>
		<strong>To infer,</strong> experience with the game is one factor for most wins. <strong>Experience</strong> has high <strong>correlation</strong> with <strong>win by wickets</strong> for top performing teams and also with <strong>high scoring rate in normal overs.</strong>
		Other factors like playing in home ground, bowling and batting statistics, wickets taken by bowlers and penalty runs given during bolwing needs to be studied.
		</p>
	</small>
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-up.png" onclick="click_up_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:630px; left:1400px; width:80px;" height="60" width="60">
		</div>					
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-down.png" onclick="click_down_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:680px; left:1400px; width:80px;" height="60" width="60">
		</div>			
	</div>	
	<div class="slides" id="credit_slide" hidden>
		<div style="position: absolute; top: 150px; left: 350px;">
		<h1>
		CREDITS & ACKNOWLEDGEMENTS
		</h1>
	   <p>
		   <ul>
			   <li>Kaggle competition for the providing dataset</li>
			   <li>Github for providing hosting services</li>
			   <li><a href="https://designmodo.com/3d-css3-button/">Designmodo</a> for providing stylish button</li>
			   <li><a href="https://d3js.org/">d3js.org</a> for providing good examples</li>
			   <li><a href="https://www.w3schools.com">w3schools</a> for learning javascript and html</li>
		   </ul>
	   </p>
	   </div>
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-up.png" onclick="click_up_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:630px; left:1400px; width:80px;" height="60" width="60">
		</div>					
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-down.png" onclick="click_down_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:680px; left:1400px; width:80px;" height="60" width="60">
		</div>			   
	</div>
	
	<div class="slides" id="github_slide"  hidden>
		<div style="position: absolute; top: 240px; left: 550px;">
			<a href="https://github.com/sudhir-behani/visualization_using_d3">GITHUB SOURCE CODE</a>
		</div>
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-up.png" onclick="click_up_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:630px; left:1400px; width:80px;" height="60" width="60">
		</div>					
		<div class="fragment" data-fragment-index="9">
			<img src="images/arrow-down.png" onclick="click_down_key()" style="cursor: pointer; border: none; background:none; box-shadow:none; position:absolute; top:680px; left:1400px; width:80px;" height="60" width="60">
		</div>				
	</div>
		
	<footer id="main_footer" hidden>
      <small>Compiled by: Sudhir Behani</small>
    </footer>
	<!--Not used buttons -->
	<div id="tooltip"></div>
	<div id="viz_button" style="display:none;"\>
		<button onclick="about_vis()"><strong>About the Visualization</strong></button>
		<button class="button" onclick="about_vis()">Data Visualization</button>
	</div>
	<div id="all_buttons" style="display:none;"\>
		<button class="button" onclick="matches_played_won()" >Matches Played Won</button>
		<button class="button" onclick="win_by()" >WinBy_Wickets_Runs </button>
		<button class="button" onclick="runs_per_over()" >RunsPerOver</button>
	</div>
	<script src="https://d3js.org/d3.v3.min.js"></script>
	<script src="js/keypress.js"></script>
</body>
<script>
	<!-- Dataset global variables -->
	var data_matches = 0;
	var data_win_by = 0;
	var data_runs_per_over = 0;
	var team_names = 0;
	
	var data_top_matches = 0;
	var data_top_win_by = 0;
	var data_top_runs_per_over = 0;
	
	<!--Colors -->
	//macthes_played_won
	var color_mp = "steelblue";
	var color_mw = "orange";

	// win_by
	var color_wbr = "#dd4477";
	var color_wbw = "#69c242";
	
	// runs per over
	var color_rps = "#994499";
	var color_rpn = "#ffcc00";				

	// count_timer_flag
	var timer_flag = 0;
		
	function settimer() {
		setTimeout(function(){ init();}, 1000);		
	}
	settimer();
	// clear the screen
	function clear_screen() {
	
		// remove any svg element
		d3.select("svg").remove();
		// remove any div elemnts
		var div_elems = document.getElementsByClassName("slides");
		var i;
		for (i = 0; i < div_elems.length; i++) {
			div_elems[i].style.display = "none";
		}
	}
	clear_screen();
	
    <!--Function to Load the data -->
	function load_data_first_page() {
		<!--Data Matches -->
		console.log('Loading matches data..')
		d3.tsv("src/matche_play_won.tsv", type_matches, function(error, data) {
			data_matches = data;
			console.log(data_matches);		
		});
		function type_matches(d) {
		  d.played = +d.played;
		  return d;
		}
		<!--Top 5 Matches -->
		console.log('Loading matches top teams data..')
		d3.tsv("src/top_matche_play_won.tsv", type_matches, function(error, data) {
			data_top_matches = data;
			console.log(data_top_matches);		
		});
		function type_matches(d) {
		  d.played = +d.played;
		  return d;
		}
	}
	
	function load_data() {
		
		<!--Data Win By -->
		console.log('Loading wins_by data..')		
		d3.tsv("src/won_winby.tsv", type_winby, function(error, data) {
			data_win_by = data;
			console.log(data_win_by);
		});
		function type_winby(d) {
		  d.won = +d.won;
		  return d;
		}
		
		<!--Top 5 WinsBy -->
		console.log('Loading wins_by data..')		
		d3.tsv("src/top_win_by.tsv", type_winby, function(error, data) {
			data_top_win_by = data;
			console.log(data_top_win_by);
		});
		function type_winby(d) {
		  d.win_by_runs = +d.win_by_runs;
		  return d;
		}
		
		<!--Data Runs Per Over -->
		console.log('Loading run per over data..')		 	
		d3.tsv("src/runs_per_over.tsv", type_runs, function(error, data) {
			if(error) console.log("error fetching runs data");
			data_runs_per_over = data;
			console.log(data_runs_per_over);
		});
		function type_runs(d) {
		  //console.log(d);
		  if (d !== null) { 
			d.runs_super_over = +d.runs_super_over;
		  }
		  return d;
		}
		
		<!--Data Runs Per Over -->
		console.log('Loading run per over data..')		 	
		d3.tsv("src/top_runs_per_over.tsv", type_runs, function(error, data) {
			if(error) console.log("error fetching runs data");
			data_top_runs_per_over = data;
			console.log(data_top_runs_per_over);
		});
		function type_runs(d) {
		  //console.log(d);
		  if (d !== null) { 
			d.runs_super_over = +d.runs_super_over;
		  }
		  return d;
		}
		
		<!--Team Full Names -->
		console.log('Reading Team Names..')
		team_names = [{
					'Chennai Super Kings':'CSK',
					'Deccan Chargers':'DC',
					'Delhi Daredevils':'DD',
					'Gujarat Lions':'GL',
					'Kings XI Punjab':'KXP',
					'Kochi Tuskers Kerala':'KTK',
					'Kolkata Knight Riders':'KKR',
					'Mumbai Indians':'MI',
					'Pune Warriors':'PW',
					'Rajasthan Royals':'RR',
					'Rising Pune Supergiant':'RPS',
					'Royal Challengers Bangalore':'RCB',
					'Sunrisers Hyderabad':'SH',
				}];
		console.log(team_names[0]);		
	}

	// body font size
	function body_font (size) {
		var b_elem = document.body
		console.log("checking body font..");
		b_elem.style.fontSize = size;
		
		console.log(b_elem.style.fontSize);			
	}
	
	// init first slides	
	function init() {

		// clear complete screen
		clear_screen();
		body_font("20px")
		// load data for first slide
		load_data_first_page();		
		// initialize the first slide
		
		// hide loading slide
		var div_elem = document.getElementById("init_slide");
		div_elem.style.display = "none";
		
		var div_elem = document.getElementById("first_slide");
		div_elem.style.display = "block";
		div_elem.top = "50%";
		div_elem.left = "50%";
		
		// load rest of the data for all slides		
		load_data();
		
		//main_footer
		//var foot = document.getElementById("main_footer");
		//foot.style.display = "block";		
	}
	//init();
	
	function click_left_key() {
		console.log("Left key pressed: "+rl_page+ " page no " + page);	
		if (rl_page === 1) {		
			event.preventDefault();
			rl_page = 0;
			switch_page(page);
			console.log("Arrow key pressed - pageup."+page);				
		  }	
	}
	
	function click_up_key () {
		if (rl_page !== 1) {
				event.preventDefault();
				if (page > 1 ) {
					page = page - 1;
				}
				switch_page(page);
				console.log("Arrow key pressed - pageup."+page);
			}	
	}
	
	function click_down_key () {
		if (rl_page !== 1) {		
			event.preventDefault();
			page = page + 1;
			if (page == 9 ) {
				page = 1;
			}			
			switch_page(page);
			console.log("Arrow key pressed - pagedown."+page);
		  }		
	}	
	// switch to page based on arraow key pressed
	function switch_page(page) {
		switch(page) {
			case 1:
				clear_screen();
				body_font("20px")
				var div_elem = document.getElementById("first_slide");
				div_elem.style.display = "block";
				div_elem.top = "50%";
				div_elem.left = "50%";
				break;
			case 2:
				clear_screen();
				body_font("20px")								
				var div_elem = document.getElementById("third_slide");
				div_elem.style.display = "block";							
				break;
			case 3:
				clear_screen();
				body_font("10px")								
				var div_elem = document.getElementById("fourth_slide");
				div_elem.style.display = "block";
				div_elem.style.top = "600px";
				div_elem.style.left = "150px";
				
				matches_played_won();
				break;
			case 4:
				clear_screen();
				body_font("10px")								
				var div_elem = document.getElementById("fifth_slide");
				div_elem.style.display = "block";
				div_elem.style.top = "600px";
				div_elem.style.left = "150px";
				
				win_by();
				break;
			case 5:
				clear_screen();
				body_font("10px")								
				var div_elem = document.getElementById("sixth_slide");
				div_elem.style.display = "block";
				div_elem.style.top = "600px";
				div_elem.style.left = "150px";
				
				runs_per_over();
				break;
			case 6:
				clear_screen();
				body_font("20px")								
				var div_elem = document.getElementById("last_slide");
				div_elem.style.display = "block";
				break;				
			case 7:
				clear_screen();
				body_font("20px");								
				var div_elem = document.getElementById("credit_slide");
				div_elem.style.display = "block";
				break;				
			case 8:
				clear_screen();
				body_font("40px");								
				var div_elem = document.getElementById("github_slide");
				div_elem.style.display = "block";
				break;								
			default:
				clear_screen();
		}				
	}
	
	// controls the site pagination 	
	var page=1;	
	var rl_page = 0;
	function pageup() {
	
		return function(event) {
		if (rl_page !== 1) {
				event.preventDefault();
				if (page > 1 ) {
					page = page - 1;
				}
				switch_page(page);
				console.log("Arrow key pressed - pageup."+page);
			}
		};
	}	

	function pagedown() {
	
		return function(event) {
		if (rl_page !== 1) {		
			event.preventDefault();
			page = page + 1;
			if (page == 9 ) {
				page = 1;
			}			
			switch_page(page);
			console.log("Arrow key pressed - pagedown."+page);
		  }	
		};
	}

	function pageleft() {
		console.log("Left key pressed: "+rl_page+ " page no " + page);
		return function(event) {
		if (rl_page === 1) {		
			event.preventDefault();
			rl_page = 0;
			switch_page(page);
			console.log("Arrow key pressed - pageup."+page);				
		  }
		};
	}	

	<!--Narative Visualization -->	
	function about_vis() {
	
		console.log("Pressed the button about_viz");	
		clear_screen();
		body_font("20px")				
		var div_elem = document.getElementById("second_slide");
		div_elem.style.display = "block";				
		rl_page = 1; // set the rl_page
		//<!--Display 3 buttons -->			
		//d3.select("svg").remove();		
		//var elem = document.getElementById("all_buttons");
		//console.log(elem)
		//if (elem.style.display === "none") {
		//	elem.style.display = "block";
		//} else {
		//	elem.style.display = "none";
		//}
	}
	
	<!-- Arrow key controls -->	
	function controls() {

	d3.select('body').call(d3.keybinding()
		.on('←', pageleft())
		.on('↑', pageup())
		.on('↓', pagedown())
		//.on('pgup', pageup())
		//.on('pgdown', pagedown())
		);	
	}
	controls();
	
	<!--ANNOTATE -->
	function chart_annotation(svg, anotate_box, ano_text, st_line, vertical_line, vert_line){
	
		var ano_rect = svg.selectAll(".bar").data(["1"]).enter();				
		ano_rect.append("rect")
			.attr("class", "ano_rect")
			.attr("x", anotate_box['x'])
			.attr("y", anotate_box['y'])
			.attr("width", anotate_box['w'])
			.attr("height", anotate_box['h'])
			.style("stroke", ano_text['color'])
			.style("stroke-width", 2)
			.style("stroke-dasharray", "5, 5")				
			.style("fill-opacity", "0");
			
		
		var ano_rect = svg.selectAll(".line").data([ano_text['text']]).enter();				
		   
		ano_rect.append("line")
			.attr("class", "ano_line")
			.attr("x1", st_line['x1'])
			.attr("y1", st_line['y1'])
			.attr("x2", st_line['x2'])				
			.attr("y2", st_line['y2'])
			.attr("fill", "none")
			.attr("stroke", ano_text['color'])
			.attr("stroke-linejoin", "round")
			.attr("stroke-linecap", "round")
			.attr("stroke-width", 1.5);  

		ano_rect.append("text")		
			.attr("x", ano_text['x'])
			.attr("y", ano_text['y'])
			.attr("dy", ".35em")
			.style("text-anchor", "middle")
			.style("font", "16px times")
			.attr("fill",ano_text['color'])
			.text(function(d) { return d; });

		if (vertical_line === 1) {
		
			ano_rect.append("line")
				.attr("class", "ano_line")
				.attr("x1", vert_line['x1'])	
				.attr("y1", vert_line['y1'])
				.attr("x2", vert_line['x2'])				
				.attr("y2", vert_line['y2'])
				.attr("fill", "none")
				.attr("stroke", ano_text['color'])
				.attr("stroke-linejoin", "round")
				.attr("stroke-linecap", "round")
				.attr("stroke-width", 1.5);  
		}
	}
		
	<!--Scene1 -->
	function matches_played_won(){
	
		d3.select("svg").remove();
						
		d3.selectAll("input")
			.on("change", changed);
		
		function match_check(){
			console.log('match checkbox selected...');
		}
		
		function changed() {
		  console.log('matches radio changed');	
		  var r_all = document.getElementById("radio_matches").checked;
		  var r_top = document.getElementById("radio_matches_top").checked;		  
		
		  console.log(this.value);	
		  if (this.value === "matches_all") matches_all();
		  else if (this.value === "matches_top") matches_top();
		  else if (this.value === "match_check" & r_all == true) matches_all();
		  else if (this.value === "match_check" & r_top == true) matches_top();	
		}		

		var r_all = document.getElementById("radio_matches").checked;
		var r_top = document.getElementById("radio_matches_top").checked;
		
		if (r_all == true) {	
			matches_bar_chart(data_matches);
		}
		else {
			matches_bar_chart(data_top_matches);
		}
		
		function matches_all() {
			//clear_screen();
			d3.selectAll("svg").remove();
			console.log('matches radio changed inside function all ..');				
			matches_bar_chart(data_matches);
		}	
		
		function matches_top() {
			//clear_screen();
			d3.select("svg").remove();
			console.log('matches radio changed inside function top ..');				
			matches_bar_chart(data_top_matches);		
		}
		
		function matches_bar_chart(data) {
		
			var margin = {top: 25, right: 80, bottom: 80, left: 80},
				width = 960 - margin.left - margin.right,
				height = 500 - margin.top - margin.bottom;
			var x = d3.scale.ordinal()
				.rangeRoundBands([0, width], .1);
			var y0 = d3.scale.linear().domain([300, 1100]).range([height, 0]);
			
			var xAxis = d3.svg.axis()
				.scale(x)
				.orient("bottom");
				
			// create left yAxis
			var yAxisLeft = d3.svg.axis().scale(y0).ticks(4).orient("left");

			var tooltip = d3.select("#tooltip");

			var svg = d3.select("body").append("svg")
				.attr("width", width + margin.left + margin.right)
				.attr("height", height + margin.top + margin.bottom)
			  .append("g")
				.attr("class", "graph")
				.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
			
			x.domain(data.map(function(d) { return d.team; }));
			y0.domain([0, d3.max(data, function(d) { return d.played; })]);
	 
			svg.append("g")
			  .attr("class", "x axis")
			  .attr("transform", "translate(0," + height + ")")
			  .call(xAxis);
			  
			svg.append("g")
			  .attr("class", "y axis axisLeft")
			  .attr("transform", "translate(0,0)")
			  .call(yAxisLeft)
			  .append("text")
				.attr("y", 6)
				.attr("dy", "-2em")
				.style("text-anchor", "middle")
				.style("text-anchor", "middle")
				.text("MATCHES");
						
			bars = svg.selectAll(".bar").data(data).enter();	
			bars.append("rect")
			    .attr("class", "bar1")
			    .attr("x", function(d) { return x(d.team); })
			    .attr("width", x.rangeBand()/2)
			    .attr("y", function(d,i,j) { return y0(d.won); })
			    .attr("height", 10)
			    .attr("fill", color_mw)		
			    .on("mouseover", function(d,i) {
					tooltip.style("opacity", 1)
						   .style("left",(d3.event.pageX)+"px")
						   .style("top",(d3.event.pageY)+"px")
						   .html("Team Name:" + d.team + "\n" +"Matches Won:"+d.won);
				})
			    .on("mouseout", function() { tooltip.style("opacity", 0) })
			    .transition().duration(3000).delay(1000)
  			    .attr("y", function(d) { return y0(d.won); })
			    .attr("height", function(d,i,j) { return height - y0(d.won); });
			   
			bars.append("rect")
			    .attr("class", "bar2")
			    .attr("x", function(d) { return x(d.team) + x.rangeBand()/2; })
			    .attr("width", x.rangeBand() / 2)
			    .attr("y", function(d,i,j) { return y0(d.played); } )
			    .attr("height", 10 )
			    .attr("fill", color_mp)
			    .on("mouseover", function(d,i) {
					tooltip.style("opacity", 1)
						   .style("left",(d3.event.pageX)+"px")
						   .style("top",(d3.event.pageY)+"px")
						   .html("Team Name:" + d.team + "\n" +"Matches Played:"+d.played);
				})
				.on("mouseout", function() { tooltip.style("opacity", 0) })
				.transition().duration(3000).delay(1000)
			    .attr("height", function(d,i,j) { return height - y0(d.played); })
				.attr("y", function(d) { return y0(d.played); });
				
					
			//function type(d) {
			//  d.played = +d.played;
			//  return d;
			//}
				
			console.log(bars);
			
			<!--Create the legend -->
			var colors = d3.scale.ordinal()
				.range([color_mp, color_mw]);		
			//var colors = d3.range([color_mp, color_mw]);		
			
			var legend = svg.selectAll(".legend")
			.data(["Matches Played", "Matches Won"])
			.enter().append("g")
			.attr("class", "legend")
			.attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });		
			
			legend.append("rect")
			.attr("x", width - 5)
			.attr("y", height + 30)
			.attr("width", 18)
			.attr("height", 18)
			.style("fill", colors);
			
			console.log(legend);
			
			legend.append("text")
			.attr("x", width - 10)
			.attr("y", height + 40)
			.attr("dy", ".35em")
			.style("text-anchor", "end")
			.text(function(d) { return d; });

			var legend_rect = svg.selectAll(".bar").data(["1"]).enter();
			legend_rect.append("rect")
				.attr("class", "leg_rect")
				.attr("x", width-150)
				.attr("y", height+23)
				.attr("width", 200)
				.attr("height", 50)
				.style("stroke","black")
				.style("stroke-width", 2)
				.style("fill-opacity", 0.001);		

			var r_all = document.getElementById("radio_matches").checked;
			var r_top = document.getElementById("radio_matches_top").checked;			
			var checkbox_state = document.getElementById("check_match_ano_all");
			
			// annotatation
			if (r_all == true & checkbox_state.checked == true) { 
				text_data = {'text':"High Experience Teams", 'x': 570, 'y': 40, 'color': 'black'};			
				anotate_box = { 'x' : 20, 'y': 0 , 'w': 440, 'h': 120 };
				st_line = { 'x1': 440, 'y1': 40, 'x2': 490, 'y2': 40 };
				vert_line = {'': 0};
				chart_annotation(svg, anotate_box, text_data, st_line, 0, vert_line);	
				
				text_data = {'text':"Mid Experience Teams", 'x': 680, 'y': 210, 'color': 'black'};			
				anotate_box = { 'x' : 440, 'y': 185 , 'w': 130, 'h': 50 };
				st_line = { 'x1': 570, 'y1': 210, 'x2': 600, 'y2': 210};
				vert_line = {'': 0};
				chart_annotation(svg, anotate_box, text_data, st_line, 0, vert_line);	

				text_data = {'text':"Low Experience Teams", 'x': 740, 'y': 270, 'color': 'black'};					
				anotate_box = { 'x' : 555	, 'y': 290 , 'w': 250, 'h': 90 };
				st_line = { 'x1': 620, 'y1': 270, 'x2': 660, 'y2': 270};
				vert_line = { 'x1': 620, 'y1': 290, 'x2': 620, 'y2': 270};
				chart_annotation(svg, anotate_box, text_data, st_line, 1, vert_line);	
			}
			else if (r_all == false & checkbox_state.checked == true) { 
			
				text_data = {'text':"CSK : Top ranked team with relatively lesser experience", 'x': 570, 'y': 0, 'color': 'black'};			
				anotate_box = { 'x' : 230, 'y': 0 , 'w': 100, 'h': 100 };
				st_line = { 'x1': 320, 'y1': 0, 'x2': 370, 'y2': 0 };
				vert_line = {'': 0};
				chart_annotation(svg, anotate_box, text_data, st_line, 0, vert_line);	
				
				text_data = {'text':"KXP: Top", 'x': 840, 'y': 20, 'color': 'red'};			
				anotate_box = { 'x' : 640, 'y': 20 , 'w': 145, 'h': 250 };
				st_line = { 'x1': 785, 'y1': 20, 'x2': 800, 'y2': 20 };
				vert_line = {'': 0};
				chart_annotation(svg, anotate_box, text_data,	 st_line, 0, vert_line);

				text_data = {'text':"	ranked", 'x': 830, 'y': 40, 'color': 'red'};							
				var ano_rect = svg.selectAll(".line").data([text_data['text']]).enter();								
				ano_rect.append("text")		
					.attr("x", text_data['x'])
					.attr("y", text_data['y'])
					.attr("dy", ".35em")
					.style("text-anchor", "middle")
					.style("font", "16px times")
					.attr("fill",text_data['color'])
					.text(function(d) { return d; });				
					
				text_data = {'text':"least wins", 'x': 840, 'y': 60, 'color': 'red'};							
				var ano_rect = svg.selectAll(".line").data([text_data['text']]).enter();								
				ano_rect.append("text")		
					.attr("x", text_data['x'])
					.attr("y", text_data['y'])
					.attr("dy", ".35em")
					.style("text-anchor", "middle")
					.style("font", "16px times")
					.attr("fill",text_data['color'])
					.text(function(d) { return d; });				
					
			}
		}
	}
	
	<!--Scene2 -->
	function win_by() {
	
		console.log("Pressed the button win_by");	
		d3.select("svg").remove();
		
		d3.selectAll("input")
			.on("change", changed);
		
		function winby_check() {
			console.log("check box selected ...");
		}
		
		function changed() {
		  console.log('checkbox changed');	
		  var r_all = document.getElementById("check_win_ano_all");
		  console.log(r_all.checked);
		  winby_all();	
		}		

		var r_all = document.getElementById("radio_winby").checked;
		//var r_top = document.getElementById("radio_winby_top").checked;
		
		if (r_all == true) {
			winby_bar_chart(data_win_by);
		}
		else {	
			winby_bar_chart(data_top_win_by);
		}
		
			function winby_all() {
			//clear_screen();
			d3.selectAll("svg").remove();
			console.log('winby radio changed inside function all ..');				
			winby_bar_chart(data_win_by);
		}	
		
		function winby_top() {
			//clear_screen();
			d3.select("svg").remove();
			console.log('winby radio changed inside function top ..');				
			winby_bar_chart(data_top_win_by);		
		}
		
		function winby_bar_chart(data) {

			var margin = {top: 25, right: 80, bottom: 80, left: 60},
				width = 1200 - margin.left - margin.right,
				height = 500 - margin.top - margin.bottom;
			var x = d3.scale.ordinal()
				.rangeRoundBands([0, width], .1);
			var y0 = d3.scale.linear().domain([300, 1100]).range([height, 0]);
			
			var xAxis = d3.svg.axis()
				.scale(x)
				.orient("bottom");
				
			// create left yAxis
			var yAxisLeft = d3.svg.axis().scale(y0).ticks(4).orient("left");
				
			console.log('new tooltip');	
			var tooltip = d3.select("#tooltip");

			var svg = d3.select("body").append("svg")
				.attr("width", width + margin.left + margin.right)
				.attr("height", height + margin.top + margin.bottom)
				.append("g")
				.attr("class", "graph")
				.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
			
			console.log('max matches played:');
			console.log(data);
			console.log(d3.max(data, function(d) { return d.won; }));
			x.domain(data.map(function(d) { return d.team; }));
			y0.domain([0, 157]);
	 
			svg.append("g")
			  .attr("class", "x axis")
			  .attr("transform", "translate(0," + height + ")")
			  .call(xAxis);
			  
			svg.append("g")
			  .attr("class", "y axis axisLeft")
			  .attr("transform", "translate(0,0)")
			  .call(yAxisLeft)
			  .append("text")
				.attr("y", 6)
				.attr("dy", "-2em")
				.style("text-anchor", "middle")
				.style("text-anchor", "middle")
				.text("COUNT");
						
			bars = svg.selectAll(".bar").data(data).enter();

			bars.append("rect")
			  .attr("class", "bar1")
			  .attr("x", function(d) { return x(d.team); })
			  .attr("width", x.rangeBand()/3)
			  .attr("y", function(d) { return y0(d.won); })
			  .attr("height", 10 )
			  .attr("fill", color_mp)
			  .on("mouseover", function(d,i) {
					tooltip.style("opacity", 1)
						   .style("left",(d3.event.pageX)+"px")
						   .style("top",(d3.event.pageY)+"px")
						   .html("Team Name:" + d.team + "               Matches Played:"+d.won);
				})
			   .on("mouseout", function() { tooltip.style("opacity", 0) })
   			   .transition().duration(3000).delay(1000)
			   .attr("height", function(d,i,j) { return height - y0(d.won); })
			   .attr("y", function(d) { return y0(d.won); });
			   
						
			bars.append("rect")
			  .attr("class", "bar2")
			  .attr("x", function(d) { return x(d.team)+ x.rangeBand()/3; })
			  .attr("width", x.rangeBand()/3)
			  .attr("y", function(d) { return y0(d.win_by_runs); })
			  .attr("height", 10 )
			  .attr("fill", color_wbr)
			  .on("mouseover", function(d,i) {
					tooltip.style("opacity", 1)
						   .style("left",(d3.event.pageX)+"px")
						   .style("top",(d3.event.pageY)+"px")
						   .html("Team Name:" + d.team + "    " +"Matches Win by runs:"+d.win_by_runs);
				})
			   .on("mouseout", function() { tooltip.style("opacity", 0) })
   			   .transition().duration(3000).delay(1000)
			   .attr("height", function(d,i,j) { return height - y0(d.win_by_runs); })
			   .attr("y", function(d) { return y0(d.win_by_runs); });

			   
			bars.append("rect")
			  .attr("class", "bar3")
			  .attr("x", function(d) { return x(d.team) + x.rangeBand()/3 + x.rangeBand()/3; })
			  .attr("width", x.rangeBand() / 3)
			  .attr("y", function(d) { return y0(d.win_by_wickets); })
			  .attr("height", 10 )
			  .attr("fill", color_wbw)
			  .on("mouseover", function(d,i) {
					tooltip.style("opacity", 1)
						   .style("left",(d3.event.pageX)+"px")
						   .style("top",(d3.event.pageY)+"px")
						   .html("Team Name:" + d.team + "     " +"Matches Win by wickets:"+d.win_by_runs);
				})
				.on("mouseout", function() { tooltip.style("opacity", 0) })
   			   .transition().duration(3000).delay(1000)
			   .attr("height", function(d,i,j) { return height - y0(d.win_by_wickets); })
			   .attr("y", function(d) { return y0(d.win_by_wickets); });
				
												
			//function type(d) {
			//  d.won = +d.won;
			//  return d;
			//}

			<!--Create the legend -->
			var colors = d3.scale.ordinal()
				.range([color_mp, color_wbr, color_wbw]);		
			
			var legend = svg.selectAll(".legend")
			.data(["Matches Played", "Win By Runs", "Win By Wickets"])
			.enter().append("g")
			.attr("class", "legend")
			.attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });		
			
			legend.append("rect")
			.attr("x", width - 5)
			.attr("y", 10)
			.attr("width", 18)
			.attr("height", 18)
			.style("fill", colors);
			
			console.log(legend);
			
			legend.append("text")
			.attr("x", width - 10)
			.attr("y", 20)
			.attr("dy", ".35em")
			.style("text-anchor", "end")
			.text(function(d) { return d; });	

			var legend_rect = svg.selectAll(".bar").data(["1"]).enter();				
			legend_rect.append("rect")
				.attr("class", "leg_rect")
				.attr("x", width-150)
				.attr("y", 0)
				.attr("width", 200)
				.attr("height", 80)
				.style("stroke","black")
				.style("stroke-width", 2)
				.style("fill-opacity", 0.001);		

			var checkbox_state = document.getElementById("check_win_ano_all");
			//console.log(r_all.checked);
			
			// annotatation	
			if (checkbox_state.checked == true) { 
				text_data = {'text':"High Experience Teams good win by wickets and runs", 'x': 680, 'y': 0, 'color': 'black'};			
				anotate_box = { 'x' : 10, 'y': 0 , 'w': 460, 'h': 220 };
				st_line = { 'x1': 470, 'y1': 0, 'x2': 490, 'y2': 0	 };
				vert_line = {'': 0};
				chart_annotation(svg, anotate_box, text_data, st_line, 0, vert_line);	
				
				text_data = {'text':"Mid Experience Teams good win by runs", 'x': 740, 'y': 60, 'color': 'black'};			
				anotate_box = { 'x' : 490, 'y': 165 , 'w': 150, 'h': 130 };
				st_line = {'x1': 560, 'y1': 60, 'x2': 590, 'y2': 60};
				vert_line = { 'x1': 560, 'y1': 165, 'x2': 560, 'y2': 60};
				chart_annotation(svg, anotate_box, text_data, st_line, 1, vert_line);	

				text_data = {'text':"Low Experience Teams good win by runs than wickets", 'x': 940, 'y': 220, 'color': 'black'};
				anotate_box = { 'x' : 730, 'y': 275 , 'w': 320, 'h': 100};
				st_line = { 'x1': 0, 'y1': 0, 'x2': 0, 'y2': 0 };
				vert_line = { 'x1': 910, 'y1': 275, 'x2': 910, 'y2': 240 };
				chart_annotation(svg, anotate_box, text_data, st_line, 1, vert_line);
			
				<!-- Exception Team with high experience but bad win by wickets -->
				text_data = {'text':"High Experience bad win by wickets but good win by runs", 'x': 940, 'y': 100, 'color': 'red'};			
				anotate_box = { 'x' : 650, 'y': 80 , 'w': 60, 'h': 220 };
				st_line = { 'x1': 710, 'y1': 100, 'x2': 740, 'y2': 100 };
				vert_line = {'': 0};
				chart_annotation(svg, anotate_box, text_data, st_line, 0, vert_line);	
			}
		}
	}
	
	<!--Scene3 -->
	function runs_per_over() {
	
		console.log("Pressed the button runs_per_over");	
		d3.select("svg").remove();
		
		d3.selectAll("input")
			.on("change", changed);
			
		function changed() {
		  console.log('runs label changed');	
		  console.log(this.value);
		  
		  if (this.value == "runs_all") runs_all();
		  else if (this.value == "runs_top" ) runs_top();
		  else { // checkbox selected 
				var r_all = document.getElementById("radio_runs").checked;
				console.log('runs checkbox selected');
				console.log(r_all);
				if (r_all == true) runs_all();
				else runs_top();		
		  }		  
		}		

		var r_all = document.getElementById("radio_runs").checked;
		var r_top = document.getElementById("radio_runs_top").checked;
		
		if (r_all == true) {
			runs_bar_chart(data_runs_per_over);
		}
		else {
			runs_bar_chart(data_top_runs_per_over);
		}
		
		function runs_all() {
			//clear_screen();
			d3.selectAll("svg").remove();
			console.log('runs radio changed inside function all ..');				
			runs_bar_chart(data_runs_per_over);
		}	
		
		function runs_top() {
			//clear_screen();
			d3.select("svg").remove();
			console.log('runs radio changed inside function top ..');				
			runs_bar_chart(data_top_runs_per_over);		
		}
		
		function runs_bar_chart(data) {
		
			var margin = {top: 60, right: 80, bottom: 80, left: 60},
				width = 960 - margin.left - margin.right,
				height = 500 - margin.top - margin.bottom;
			var x = d3.scale.ordinal()
				.rangeRoundBands([0, width], .1);
			var y0 = d3.scale.linear().domain([300, 1100]).range([height, 0]);
			
			var xAxis = d3.svg.axis()
				.scale(x)
				.orient("bottom");
				
			// create left yAxis
			var yAxisLeft = d3.svg.axis().scale(y0).ticks(4).orient("left");

			var tooltip_r = d3.select("#tooltip");

			var svg = d3.select("body").append("svg")
				.attr("width", width + margin.left + margin.right)
				.attr("height", height + margin.top + margin.bottom)
				.append("g")
				.attr("class", "graph")
				.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
			
			x.domain(data.map(function(d) { return d.team; }));
			y0.domain([0, d3.max(data, function(d) { return d.runs_super_over; })]);
	 
			svg.append("g")
			  .attr("class", "x axis")
			  .attr("transform", "translate(0," + height + ")")
			  .call(xAxis);
			  
			svg.append("g")
			  .attr("class", "y axis axisLeft")
			  .attr("transform", "translate(0,0)")
			  .call(yAxisLeft)
			  .append("text")
				.attr("y", 6)
				.attr("dy", "-2em")
				.style("text-anchor", "middle")
				.style("text-anchor", "middle")
				.text("AVG RUNS PER OVER");
				
			bars = svg.selectAll(".bar").data(data).enter();	
			bars.append("rect")
			  .attr("class", "bar1")
			  .attr("x", function(d) { return x(d.team); })
			  .attr("width", x.rangeBand()/2)
			  .attr("y", function(d) { return y0(d.runs_super_over); })
			  .attr("height", function(d,i,j) { return height - y0(d.runs_super_over); }) 
			  .attr("fill", color_rps)				  
			  .on("mouseover", function(d,i) {
					tooltip_r.style("opacity", 1)
						   .style("left",(d3.event.pageX)+"px")
						   .style("top",(d3.event.pageY)+"px")
						   .html("Team Name:" + d.team + "\n" + "Runs Per Super Over:"+d.runs_super_over);
				})
			   .on("mouseout", function() { tooltip_r.style("opacity", 0) });

			bars.append("rect")
			  .attr("class", "bar2")
			  .attr("x", function(d) { return x(d.team) + x.rangeBand()/2; })
			  .attr("width", x.rangeBand() / 2)
			  .attr("y", function(d) { return y0(d.runs_normal_over); })
			  .attr("height", function(d,i,j) { return height - y0(d.runs_normal_over); })
			  .attr("fill", color_rpn)				  
			  .on("mouseover", function(d,i) {
					tooltip_r.style("opacity", 1)
						   .style("left",(d3.event.pageX)+"px")
						   .style("top",(d3.event.pageY)+"px")
						   .html("Team Name:" + d.team + "\n" + "Runs Per Normal Over:"+d.runs_normal_over);
				})
				.on("mouseout", function() { tooltip_r.style("opacity", 0) });
					
			function type(d) {
			  d.runs_super_over = +d.runs_super_over;
			  return d;
			}		

			<!--Create the legend -->
			var colors = d3.scale.ordinal()
				.range([color_rps, color_rpn]);		

			console.log('before legend rect');
			console.log(data);

			var legend = svg.selectAll(".legend")
			.data(["Avg Runs Per Super Over", "Avg Runs Per Normal Over"])
			.enter().append("g")
			.attr("class", "legend")
			.attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });		
			
			legend.append("rect")
			.attr("x", width)
			.attr("y", height+35)
			.attr("width", 18)
			.attr("height", 18)
			.style("fill", colors);
			
			legend.append("text")
			.attr("x", width - 10)
			.attr("y", height + 45)
			.attr("dy", ".35em")
			.style("text-anchor", "end")
			.text(function(d) { return d; });

			console.log('new legend rect');
			console.log(data);
			
			var legend_rect = svg.selectAll(".bar").data(["1"]).enter();				
			legend_rect.append("rect")
				.attr("class", "leg_rect")
				.attr("x", width-150)
				.attr("y", height+28)
				.attr("width", 200)
				.attr("height", 50)
				.style("stroke","black")
				.style("stroke-width", 2)
				.style("fill-opacity", 0.001);		

			var r_all = document.getElementById("radio_runs").checked;
			var checkbox_state = document.getElementById("check_runs_ano_all");
			
			// annotatation	
			if (r_all == true) {
				if (checkbox_state.checked == true) { 
				text_data = {'text':"High Experience Teams better avg runs per over in normal overs", 'x': 700, 'y': 0, 'color': 'black'};
				anotate_box = { 'x' : 10, 'y': 0 , 'w': 420, 'h': 320};
				st_line = { 'x1': 430, 'y1': 0, 'x2': 490, 'y2': 0};
				vert_line = {'': 0};
				chart_annotation(svg, anotate_box, text_data, st_line, 0, vert_line);
				
				text_data = {'text':"Mid Experience Teams lower runs in normals overs than high", 'x': 700, 'y': 30, 'color': 'black'};			
				anotate_box = { 'x' : 440, 'y': 165 , 'w': 60, 'h': 130 };
				st_line = {'x1': 480, 'y1': 30, 'x2': 500, 'y2': 30};
				vert_line = { 'x1': 480, 'y1': 165, 'x2': 480, 'y2': 30};
				chart_annotation(svg, anotate_box, text_data, st_line, 1, vert_line);	
				
				text_data = {'text':"experience teams", 'x': 560, 'y': 50, 'color': 'black'};			
				anotate_box = { 'x' : 0, 'y': 0 , 'w': 0, 'h': 0 };
				st_line = {'x1': 0, 'y1': 0, 'x2': 0, 'y2': 0};
				vert_line = { 'x1': 0, 'y1': 0, 'x2': 0, 'y2': 0};
				chart_annotation(svg, anotate_box, text_data, st_line, 0, vert_line);	
				
				//  
				text_data = {'text':"with SH an exception", 'x': 690, 'y': 50, 'color': 'red'};			
				anotate_box = { 'x' : 620, 'y': 70 , 'w': 60, 'h': 130 };
				st_line = {'x1': 0, 'y1': 0, 'x2': 0, 'y2': 0};
				vert_line = { 'x1': 650, 'y1': 70, 'x2': 650, 'y2': 60};
				chart_annotation(svg, anotate_box, text_data, st_line, 1, vert_line);	
				
				text_data = {'text':"Low Experience Teams", 'x': 800, 'y': 200, 'color': 'black'};
				anotate_box = { 'x' : 510, 'y': 250 , 'w': 300, 'h': 80};	
				st_line = { 'x1': 0, 'y1': 0, 'x2': 0, 'y2': 0 };	
				vert_line = { 'x1': 660, 'y1': 250, 'x2': 770, 'y2': 210 };
				chart_annotation(svg, anotate_box, text_data, st_line, 1, vert_line);
				//  lower runs in normal overs		
			  }
			}
			else if (check_runs_ano_all.checked == true) {
				<!-- Exception Team with high experience but bad win by wickets -->
				text_data = {'text':"CSK: Top team good avg normal over runs but lower avg super over runs", 'x': 340, 'y': 40, 'color': 'red'};
				anotate_box = { 'x' : 170, 'y': 80 , 'w': 160, 'h': 220 };
				st_line = { 'x1': 0, 'y1': 0, 'x2': 0, 'y2': 0 };
				vert_line = { 'x1': 250, 'y1': 80, 'x2': 250, 'y2': 50 };
				chart_annotation(svg, anotate_box, text_data, st_line, 1, vert_line);
			}	
		}		
	} 

</script>
<div id="matches" style="display:none;">
	<script>
		var match = document.getElementById("matches");
		if (match.style.display === "none") {
			;
		} else {
			matches_played_won();
		}
	</script>
</div>
</html>